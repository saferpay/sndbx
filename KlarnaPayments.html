<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<link rel="stylesheet" href="assets/css/vendors.css" />
	<link rel="stylesheet" href="assets/css/helppage.css">

	<title>Saferpay documentation | Integration Guide</title>
</head>
<body data-spy="scroll" data-target="#navScrollspy">

	<div id="content" class="container-fluid">
		<div>
			<nav class="hidden-xs hidden-sm hidden-md" id="navScrollspy">
				<div data-spy="affix" class="affix">

					<h3>
						<span style="font-size: x-large; font-weight: bold">Saferpay</span>
						<span class="text-primary">Integration Guide</span>
					</h3>

					<ul class="nav">
							<li>
							<a href="index.html">Introduction</a>
							<ul class="nav">
								<li><a href="#intro-requirement">Requirements</a></li>
								<li><a href="#pci">Data Security and PCI DSS</a></li>
								<li><a href="#3ds">3-D Secure</a></li>
								<li><a href="#dcc">Dynamic Currency Conversion</a></li>
								<li><a href="#version">Versioning</a></li>
								<li><a href="#pm-functions">Payment Method Features</a></li>
								<li><a href="#capture-batch">Capture and Daily Closing</a></li>
								<li><a href="#capture">Capture</a></li>
								<li><a href="#closing">Daily Closing</a></li>
								<li><a href="#special">Special Cases</a></li>
								<li><a href="#reservation">Reservation-Times</a></li>
								<li><a href="#liventesting">Testing and Go Live</a></li>
								<li><a href="#terms">Understanding common Saferpay Terms</a></li>
							</ul>
							</li>
							<li>
							<a href="tls.html">TLS Security and Communication Settings</a>
							</li>
							<li>
							<a href="Interfaces.html">Licenses and Interfaces</a>
							<ul class="nav">
								<li><a href="#interfaces">The Interfaces</a></li>
								<li><a href="#int-paymentmethods">Supported Payment Methods</a></li>
								<li><a href="#int-what">What should i use?</a></li>
								<li><a href="#int-questions">Questions?</a></li>
							</ul>
							</li>
							<li>
							<a href="psd2.html">PSD2</a>
							<ul class="nav">
								<li><a href="#psd2-apply">Does PSD2 apply to me?</a></li>
								<li><a href="#psd2-when">When to do SCA</a></li>
								<li><a href="#psd2-overview">Overview</a></li>
								<li><a href="#psd2-force">When and how to force SCA</a></li>
								<li><a href="#psd2-exemptions">Exemptions</a></li>
								<li><a href="#psd2-decline">Soft Decline</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_PP.html">Payment Page Interface</a>
							<ul class="nav">
								<li><a href="#pp-initialize">PaymentPage Initialize</a></li>
								<li><a href="#pp-initialize-response">PaymentPage Initialize Response</a></li>
								<li><a href="#pp-transaction">Redirect and Transaction</a></li>
								<li><a href="#pp-retshop">Return to the Shop</a></li>
								<li><a href="#pp-assert">PaymentPage Assert</a></li>
								<li><a href="#pp-captcancel">Capture or Cancel</a></li>
								<li><a href="#pp-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="SaferpayFields.html">Saferpay Fields</a>
							<ul class="nav">
								<li><a href="#hf-flow">Basic Flow</a></li>
								<li><a href="#hf-prep">Preparation</a></li>
								<li><a href="#hf-integration">Integration and Initialization</a></li>
								<li><a href="#hf-class">SaferpayFields - Class functions</a></li>
								<li><a href="#hf-example">Examples</a></li>
								<li><a href="#hf-steps">Further steps</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_trx.html">Transaction Interface</a>
							<ul class="nav">
								<li><a href="#trx-cc">Credit Cards</a></li>
								<li><a href="#trx-ini">Transaction Initialize</a></li>
								<li><a href="#trx-iframe">RedirectUrl inside iframe</a></li>
								<li><a href="#trx-3ds">3-D Secure and DCC</a></li>
								<li><a href="#trx-retshop">Return to the Shop</a></li>
								<li><a href="#trx-ta">Transaction Authorize</a></li>
								<li><a href="#trx-captcancel">Capture or Cancel</a></li>
								<li><a href="#trx-sepa">SEPA Direct Debit</a></li>
								<li><a href="#trx-demo">Try it!</a></li>
								<li><a href="#trx-post">Using your own HTML-Form</a></li>
							</ul>
							</li>
							<li>
							<a href="scd.html">Secure Card Data</a>
							<ul class="nav">
								<li><a href="#scd-req">Requirements</a></li>
								<li><a href="#scd-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#scd-pp">Secure Card Data and the Payment Page</a></li>
								<li><a href="#scd-trx">Secure Card Data and the Transaction Interface</a></li>
								<li><a href="#scd-sa">Standalone Secure Card Data registration</a></li>
								<li><a href="#scd-spg">Secure Card Data and the Secure PayGate</a></li>
								<li><a href="#scd-check">The Check function</a></li>
								<li><a href="#scd-generator">The Id-generator</a></li>
								<li><a href="#scd-use">How to use the obtained data</a></li>
							</ul>
							</li>
							<li>
							<a href="recurring.html">Recurring Payments</a>
							<ul class="nav">
								<li><a href="#recurring-req">Requirements</a></li>
								<li><a href="#recurring-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#recurring-referenced">Referenced  Transactions Method</a></li>
								<li><a href="#recurring-auto">Automating the Recurring Payments</a></li>
							</ul>
							</li>
							<li>
							<a href="refund.html">Refunds via API</a>
							<ul class="nav">
								<li><a href="#refund-req">Requirements</a></li>
								<li><a href="#refund-reference">Method 1: Refernced refunds</a></li>
								<li><a href="#refund-demo">Try it!</a></li>
								<li><a href="#refund-alias">Method 2: Refunds using an alias</a></li>
								<li><a href="#refund-capture">Capture</a></li>
								<li><a href="#refund-cancel">Difference, between Cancel and Refund</a></li>
								<li><a href="#refund-info">Additional information</a></li>
							</ul>
							</li>
							<li>
							<a href="Inquire.html">Inquire Interface</a>
							<ul class="nav">
								<li><a href="#inquire-rules">Rules and limitations</a></li>
								<li><a href="#inquire-examples">Examples</a></li>
							</ul>
							</li>
							<li>
							<a href="app-integration.html">Mobile App integration</a>
							<ul class="nav">
								<li><a href="#mobile-cardprocess">Process</a></li>
								<li><a href="#mobile-alterprocess">3rd Party Payment Methods</a></li>
							</ul>
							</li>
							<li>
							<a href="CssiFrame.html">IFrame Integration and CSS</a>
							<ul class="nav">
								<li><a href="#css-iframe">Iframe Integration</a></li>
								<li><a href="#css-pp">Payment Page</a></li>
								<li><a href="#css-trxini">Transaction Initialize</a></li>
								<li><a href="#css-aliasins">Alias Insert</a></li>
								<li><a href="#css-iframe_size">Size of the Iframe</a></li>
								<li><a href="#css-iframe_support">Iframe Support</a></li>
								<li><a href="#css-usecss">Using CSS</a></li>
								<li><a href="#css-element">CSS Elements</a></li>
								<li><a href="#css-selector">CSS Selectors</a></li>
								<li><a href="#css-info">Additional Info</a></li>
							</ul>
							</li>
							<li>
							<a href="partialcaptures.html">Partial Captures</a>
							<ul class="nav">
								<li><a href="#pc-req">Requirements</a></li>
								<li><a href="#pc-exec">Executing a Multipart Capture</a></li>
								<li><a href="#pc-final">Finalizing a Capture-Chain</a></li>
								<li><a href="#pc-final-why">Why do you need to finalize a transaction?</a></li>
								<li><a href="#pc-refund">Handling Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="marketplace.html">Marketplace</a>
							<ul class="nav">
								<li><a href="#mark-req">Requirements</a></li>
								<li><a href="#mark-submerchants">Submerchants</a></li>
								<li><a href="#mark-fee">Applying Fees</a></li>
							</ul>
							</li>
							<li>
							<a href="spg.html">Secure PayGate REST API</a>
							<ul class="nav">
								<li><a href="#spg-req">Requirements</a></li>
								<li><a href="#spg-config">Secure PayGate configuration</a></li>
								<li><a href="#spg-api">The REST API</a></li>
								<li><a href="#spg-json">Connecting the JSON API</a></li>
								<li><a href="#spg-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="fraugster.html">Fraud Prevention</a>
							<ul class="nav">
								<li><a href="#fire-req">Requirements</a></li>
								<li><a href="#fire-activation">Activation</a></li>
								<li><a href="#fire-training">Training</a></li>
								<li><a href="#fire-data">Datapoints</a></li>
								<li><a href="#fire-rules">Rules</a></li>
								<li><a href="#fire-responses">Responses</a></li>
							</ul>
							</li>
							<li>
							<a href="health.html">API Health Check</a>
							</li>
							<li>
							<a href="mciinstallments.html">Mastercard Issuer Installments</a>
							<ul class="nav">
								<li><a href="#mcii-intro">Introduction</a></li>
								<li><a href="#mcii-req">Prerequisites</a></li>
								<li><a href="#mcii-opt">Receiving installment options</a></li>
								<li><a href="#mcii-plan">Choosing an installment plan</a></li>
								<li><a href="#mcii-test">Test Cards</a></li>
							</ul>
							</li>
							<li>
							<a href="faq.html">FAQ</a>
							</li>
							<li>
							<a href="paymentmeans.html">Payment means for testing</a>
							<ul class="nav">
								<li><a href="#pm-visa">VISA</a></li>
								<li><a href="#pm-mc">Mastercard</a></li>
								<li><a href="#pm-amex">American Express</a></li>
								<li><a href="#pm-diners">Diners Club</a></li>
								<li><a href="#pm-maestro">Maestro international</a></li>
								<li><a href="#pm-jcb">JCB</a></li>
								<li><a href="#pm-myone">My One</a></li>
								<li><a href="#pm-bonus">Bonus Card</a></li>
								<li><a href="#pm-bc">Bancontact</a></li>
								<li><a href="#pm-sepa">SEPA Direct Debit</a></li>
								<li><a href="#pm-paypal">PayPal</a></li>
								<li><a href="#pm-twint">TWINT</a></li>
								<li><a href="#ideal-cards">iDeal</a></li>
								<li><a href="#paydirekt-cards">paydirekt</a></li>
								<li><a href="#unionpay-cards">UnionPay</a></li>
								<li><a href="#postfinance-cards">Postfinance</a></li>
								<li><a href="#applepay-cards">Apple Pay</a></li>
								<li><a href="#klarna-cards">Klarna Payments</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Demo</h4></a>
							</li>
							<li>
							<a href="https://shop.saferpay.eu/saferpayintegration" target="_blank">Saferpay Demo Environment</a>
							</li>
							<li>
								<a><h4>Payment Method specifics</h4></a>
							</li>
							<li>
							<a href="creditcards.html">Credit Cards</a>
							<ul class="nav">
								<li><a href="#cc-pappoval">Partial approvals</a></li>
								<li><a href="#cc-scase">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Masterpass.html">Masterpass</a>
							<ul class="nav">
								<li><a href="#mp-req">Requirements</a></li>
								<li><a href="#mp-pp">Masterpass via Payment Page</a></li>
								<li><a href="#mp-special">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Twint.html">TWINT</a>
							<ul class="nav">
								<li><a href="#twint-requirement">Requirements</a></li>
								<li><a href="#twint-general">General specifics</a></li>
								<li><a href="#twint-uof">Twint User on File</a></li>
							</ul>
							</li>
							<li>
							<a href="PayPal.html">PayPal</a>
							<ul class="nav">
								<li><a href="#ppal-requirement">Requirements</a></li>
								<li><a href="#ppal-api-access">Grant API Approval for Saferpay</a></li>
								<li><a href="#ppal-capture">Capture and the solvency of the customer</a></li>
								<li><a href="#ppal-iframe">PayPal iFrame integration</a></li>
								<li><a href="#ppal-special">Other special cases</a></li>
							</ul>
							</li>
							<li>
							<a href="BillPay.html">BillPay</a>
							<ul class="nav">
								<li><a href="#bp-requirement">Requirements</a></li>
								<li><a href="#bp-approval-api">BillPay Certification via API</a></li>
								<li><a href="#bp-assert">Assert</a></li>
								<li><a href="#bp-capt">Capture</a></li>
								<li><a href="#bp-approval-bo">BillPay Certification via Saferpay Backoffice</a></li>
							</ul>
							</li>
							<li>
							<a href="PostFinance.html">Swiss Postcard</a>
							<ul class="nav">
								<li><a href="#pf-requirement">Requirements</a></li>
								<li><a href="#pf-alias">Storage in the Secure Card Data Store</a></li>
								<li><a href="#pf-regdial">Registration Dialogue</a></li>
							</ul>
							</li>
							<li>
							<a href="sofort.html">SOFORT by Klarna</a>
							<ul class="nav">
								<li><a href="#sf-requirement">Requirements</a></li>
								<li><a href="#sf-newproject">Create a new project for SOFORT</a></li>
								<li><a href="#sf-iFrame">Sofort iFrame integration</a></li>
								<li><a href="#sf-refund">SEPA manual Refunds for Sofort</a></li>
							</ul>
							</li>
							<li class="active">
							<a href="KlarnaPayments.html">Klarna Payments</a>
							<ul class="nav">
								<li><a href="#klarna-req">Requirements</a></li>
								<li><a href="#klarna-activation">Activation</a></li>
								<li><a href="#klarna-testing">Testing Period</a></li>
								<li><a href="#klarna-integration">Integration</a></li>
							</ul>
							</li>
							<li>
							<a href="eps.html">eps</a>
							<ul class="nav">
								<li><a href="#eps-requirement">Requirements</a></li>
								<li><a href="#eps-newproject">How toget an EPS acceptance agreement</a></li>
							</ul>
							</li>
							<li>
							<a href="paydirekt.html">paydirekt</a>
							<ul class="nav">
								<li><a href="#pd-requirement">Requirements</a></li>
								<li><a href="#pd-address">Handling of delivery address</a></li>
								<li><a href="#pd-pending">Display of pending status for bookings</a></li>
								<li><a href="#pd-note">Notification after change from pending to final status</a></li>
								<li><a href="#pd-query">Querying the transaction status</a></li>
								<li><a href="#pd-refund">Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="ideal.html">iDeal</a>
							<ul class="nav">
								<li><a href="#ideal-requirement">Requirements</a></li>
								<li><a href="#ideal-timeout">Session Timeouts</a></li>
								<li><a href="#ideal-pre">Bank Pre-Selection</a></li>
								<li><a href="#ideal-refund">SEPA manual Refunds for iDeal</a></li>
							</ul>
							</li>
							<li>
							<a href="sepa.html">SEPA</a>
							<ul class="nav">
								<li><a href="#sepa-requirement">Requirements</a></li>
								<li><a href="#sepa-refund">SEPA manual Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="eprzelewy.md.html">ePrzelewy</a>
							<ul class="nav">
								<li><a href="#przelewy-requirement">Requirements</a></li>
							</ul>
							</li>
							<li>
							<a href="Alipay.html">Alipay</a>
							<ul class="nav">
								<li><a href="#alipay-requirement">Requirements</a></li>
								<li><a href="#alipay-general">General specifics</a></li>
							</ul>
							</li>
							<li>
							<a href="bancontact.html">Bancontact</a>
							<ul class="nav">
								<li><a href="#bancontact-requirement">Requirements</a></li>
								<li><a href="#bancontact-directmode">Bancontact Direct Mode</a></li>
								<li><a href="#bancontact-refund">Bancontact Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="applepay.html">ApplePay</a>
							<ul class="nav">
								<li><a href="#apple-requirement">Requirements</a></li>
								<li><a href="#apple-activation">Activation</a></li>
								<li><a href="#apple-redirect">Direct redirect</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Additional Information</h4></a>
							</li>
							<li>
							<a href="https://www.six-payment-services.com/de/site/e-commerce/learn-more/saferpay-blog.html" target="_blank">Saferpay Blog</a>
							</li>
							<li>
							<a href="contact.html">Contact</a>
							</li>
							<li>
							<a href="http://saferpay.github.io/jsonapi/" target="_blank">API Specification</a>
							</li>
							<li>
							<a href="https://saferpay.github.io/changelog/" target="_blank">Changelog</a>
							</li>

					</ul>
				</div>
			</nav>

			<span class="print-page-break"></span>

			<main>
				<div class="hidden-print hidden-lg">
					<div id="navCollapse">

						<button class="menu-btn" type="button" data-toggle="collapse" data-target="#menu-collapse">
							<span class="glyphicon glyphicon-menu-hamburger"></span>
							<h3 style="display: inline-block">
								<span style="font-size: x-large; font-weight: bold">Saferpay</span>
								<span class="text-primary">Integration Guide</span>
							</h3>
						</button>

					</div>

					<ul class="nav collapse" id="menu-collapse">
							<li>
							<a href="index.html">Introduction</a>
							<ul class="nav">
								<li><a href="#intro-requirement">Requirements</a></li>
								<li><a href="#pci">Data Security and PCI DSS</a></li>
								<li><a href="#3ds">3-D Secure</a></li>
								<li><a href="#dcc">Dynamic Currency Conversion</a></li>
								<li><a href="#version">Versioning</a></li>
								<li><a href="#pm-functions">Payment Method Features</a></li>
								<li><a href="#capture-batch">Capture and Daily Closing</a></li>
								<li><a href="#capture">Capture</a></li>
								<li><a href="#closing">Daily Closing</a></li>
								<li><a href="#special">Special Cases</a></li>
								<li><a href="#reservation">Reservation-Times</a></li>
								<li><a href="#liventesting">Testing and Go Live</a></li>
								<li><a href="#terms">Understanding common Saferpay Terms</a></li>
							</ul>
							</li>
							<li>
							<a href="tls.html">TLS Security and Communication Settings</a>
							</li>
							<li>
							<a href="Interfaces.html">Licenses and Interfaces</a>
							<ul class="nav">
								<li><a href="#interfaces">The Interfaces</a></li>
								<li><a href="#int-paymentmethods">Supported Payment Methods</a></li>
								<li><a href="#int-what">What should i use?</a></li>
								<li><a href="#int-questions">Questions?</a></li>
							</ul>
							</li>
							<li>
							<a href="psd2.html">PSD2</a>
							<ul class="nav">
								<li><a href="#psd2-apply">Does PSD2 apply to me?</a></li>
								<li><a href="#psd2-when">When to do SCA</a></li>
								<li><a href="#psd2-overview">Overview</a></li>
								<li><a href="#psd2-force">When and how to force SCA</a></li>
								<li><a href="#psd2-exemptions">Exemptions</a></li>
								<li><a href="#psd2-decline">Soft Decline</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_PP.html">Payment Page Interface</a>
							<ul class="nav">
								<li><a href="#pp-initialize">PaymentPage Initialize</a></li>
								<li><a href="#pp-initialize-response">PaymentPage Initialize Response</a></li>
								<li><a href="#pp-transaction">Redirect and Transaction</a></li>
								<li><a href="#pp-retshop">Return to the Shop</a></li>
								<li><a href="#pp-assert">PaymentPage Assert</a></li>
								<li><a href="#pp-captcancel">Capture or Cancel</a></li>
								<li><a href="#pp-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="SaferpayFields.html">Saferpay Fields</a>
							<ul class="nav">
								<li><a href="#hf-flow">Basic Flow</a></li>
								<li><a href="#hf-prep">Preparation</a></li>
								<li><a href="#hf-integration">Integration and Initialization</a></li>
								<li><a href="#hf-class">SaferpayFields - Class functions</a></li>
								<li><a href="#hf-example">Examples</a></li>
								<li><a href="#hf-steps">Further steps</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_trx.html">Transaction Interface</a>
							<ul class="nav">
								<li><a href="#trx-cc">Credit Cards</a></li>
								<li><a href="#trx-ini">Transaction Initialize</a></li>
								<li><a href="#trx-iframe">RedirectUrl inside iframe</a></li>
								<li><a href="#trx-3ds">3-D Secure and DCC</a></li>
								<li><a href="#trx-retshop">Return to the Shop</a></li>
								<li><a href="#trx-ta">Transaction Authorize</a></li>
								<li><a href="#trx-captcancel">Capture or Cancel</a></li>
								<li><a href="#trx-sepa">SEPA Direct Debit</a></li>
								<li><a href="#trx-demo">Try it!</a></li>
								<li><a href="#trx-post">Using your own HTML-Form</a></li>
							</ul>
							</li>
							<li>
							<a href="scd.html">Secure Card Data</a>
							<ul class="nav">
								<li><a href="#scd-req">Requirements</a></li>
								<li><a href="#scd-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#scd-pp">Secure Card Data and the Payment Page</a></li>
								<li><a href="#scd-trx">Secure Card Data and the Transaction Interface</a></li>
								<li><a href="#scd-sa">Standalone Secure Card Data registration</a></li>
								<li><a href="#scd-spg">Secure Card Data and the Secure PayGate</a></li>
								<li><a href="#scd-check">The Check function</a></li>
								<li><a href="#scd-generator">The Id-generator</a></li>
								<li><a href="#scd-use">How to use the obtained data</a></li>
							</ul>
							</li>
							<li>
							<a href="recurring.html">Recurring Payments</a>
							<ul class="nav">
								<li><a href="#recurring-req">Requirements</a></li>
								<li><a href="#recurring-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#recurring-referenced">Referenced  Transactions Method</a></li>
								<li><a href="#recurring-auto">Automating the Recurring Payments</a></li>
							</ul>
							</li>
							<li>
							<a href="refund.html">Refunds via API</a>
							<ul class="nav">
								<li><a href="#refund-req">Requirements</a></li>
								<li><a href="#refund-reference">Method 1: Refernced refunds</a></li>
								<li><a href="#refund-demo">Try it!</a></li>
								<li><a href="#refund-alias">Method 2: Refunds using an alias</a></li>
								<li><a href="#refund-capture">Capture</a></li>
								<li><a href="#refund-cancel">Difference, between Cancel and Refund</a></li>
								<li><a href="#refund-info">Additional information</a></li>
							</ul>
							</li>
							<li>
							<a href="Inquire.html">Inquire Interface</a>
							<ul class="nav">
								<li><a href="#inquire-rules">Rules and limitations</a></li>
								<li><a href="#inquire-examples">Examples</a></li>
							</ul>
							</li>
							<li>
							<a href="app-integration.html">Mobile App integration</a>
							<ul class="nav">
								<li><a href="#mobile-cardprocess">Process</a></li>
								<li><a href="#mobile-alterprocess">3rd Party Payment Methods</a></li>
							</ul>
							</li>
							<li>
							<a href="CssiFrame.html">IFrame Integration and CSS</a>
							<ul class="nav">
								<li><a href="#css-iframe">Iframe Integration</a></li>
								<li><a href="#css-pp">Payment Page</a></li>
								<li><a href="#css-trxini">Transaction Initialize</a></li>
								<li><a href="#css-aliasins">Alias Insert</a></li>
								<li><a href="#css-iframe_size">Size of the Iframe</a></li>
								<li><a href="#css-iframe_support">Iframe Support</a></li>
								<li><a href="#css-usecss">Using CSS</a></li>
								<li><a href="#css-element">CSS Elements</a></li>
								<li><a href="#css-selector">CSS Selectors</a></li>
								<li><a href="#css-info">Additional Info</a></li>
							</ul>
							</li>
							<li>
							<a href="partialcaptures.html">Partial Captures</a>
							<ul class="nav">
								<li><a href="#pc-req">Requirements</a></li>
								<li><a href="#pc-exec">Executing a Multipart Capture</a></li>
								<li><a href="#pc-final">Finalizing a Capture-Chain</a></li>
								<li><a href="#pc-final-why">Why do you need to finalize a transaction?</a></li>
								<li><a href="#pc-refund">Handling Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="marketplace.html">Marketplace</a>
							<ul class="nav">
								<li><a href="#mark-req">Requirements</a></li>
								<li><a href="#mark-submerchants">Submerchants</a></li>
								<li><a href="#mark-fee">Applying Fees</a></li>
							</ul>
							</li>
							<li>
							<a href="spg.html">Secure PayGate REST API</a>
							<ul class="nav">
								<li><a href="#spg-req">Requirements</a></li>
								<li><a href="#spg-config">Secure PayGate configuration</a></li>
								<li><a href="#spg-api">The REST API</a></li>
								<li><a href="#spg-json">Connecting the JSON API</a></li>
								<li><a href="#spg-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="fraugster.html">Fraud Prevention</a>
							<ul class="nav">
								<li><a href="#fire-req">Requirements</a></li>
								<li><a href="#fire-activation">Activation</a></li>
								<li><a href="#fire-training">Training</a></li>
								<li><a href="#fire-data">Datapoints</a></li>
								<li><a href="#fire-rules">Rules</a></li>
								<li><a href="#fire-responses">Responses</a></li>
							</ul>
							</li>
							<li>
							<a href="health.html">API Health Check</a>
							</li>
							<li>
							<a href="mciinstallments.html">Mastercard Issuer Installments</a>
							<ul class="nav">
								<li><a href="#mcii-intro">Introduction</a></li>
								<li><a href="#mcii-req">Prerequisites</a></li>
								<li><a href="#mcii-opt">Receiving installment options</a></li>
								<li><a href="#mcii-plan">Choosing an installment plan</a></li>
								<li><a href="#mcii-test">Test Cards</a></li>
							</ul>
							</li>
							<li>
							<a href="faq.html">FAQ</a>
							</li>
							<li>
							<a href="paymentmeans.html">Payment means for testing</a>
							<ul class="nav">
								<li><a href="#pm-visa">VISA</a></li>
								<li><a href="#pm-mc">Mastercard</a></li>
								<li><a href="#pm-amex">American Express</a></li>
								<li><a href="#pm-diners">Diners Club</a></li>
								<li><a href="#pm-maestro">Maestro international</a></li>
								<li><a href="#pm-jcb">JCB</a></li>
								<li><a href="#pm-myone">My One</a></li>
								<li><a href="#pm-bonus">Bonus Card</a></li>
								<li><a href="#pm-bc">Bancontact</a></li>
								<li><a href="#pm-sepa">SEPA Direct Debit</a></li>
								<li><a href="#pm-paypal">PayPal</a></li>
								<li><a href="#pm-twint">TWINT</a></li>
								<li><a href="#ideal-cards">iDeal</a></li>
								<li><a href="#paydirekt-cards">paydirekt</a></li>
								<li><a href="#unionpay-cards">UnionPay</a></li>
								<li><a href="#postfinance-cards">Postfinance</a></li>
								<li><a href="#applepay-cards">Apple Pay</a></li>
								<li><a href="#klarna-cards">Klarna Payments</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Demo</h4></a>
							</li>
							<li>
							<a href="https://shop.saferpay.eu/saferpayintegration" target="_blank">Saferpay Demo Environment</a>
							</li>
							<li>
								<a><h4>Payment Method specifics</h4></a>
							</li>
							<li>
							<a href="creditcards.html">Credit Cards</a>
							<ul class="nav">
								<li><a href="#cc-pappoval">Partial approvals</a></li>
								<li><a href="#cc-scase">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Masterpass.html">Masterpass</a>
							<ul class="nav">
								<li><a href="#mp-req">Requirements</a></li>
								<li><a href="#mp-pp">Masterpass via Payment Page</a></li>
								<li><a href="#mp-special">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Twint.html">TWINT</a>
							<ul class="nav">
								<li><a href="#twint-requirement">Requirements</a></li>
								<li><a href="#twint-general">General specifics</a></li>
								<li><a href="#twint-uof">Twint User on File</a></li>
							</ul>
							</li>
							<li>
							<a href="PayPal.html">PayPal</a>
							<ul class="nav">
								<li><a href="#ppal-requirement">Requirements</a></li>
								<li><a href="#ppal-api-access">Grant API Approval for Saferpay</a></li>
								<li><a href="#ppal-capture">Capture and the solvency of the customer</a></li>
								<li><a href="#ppal-iframe">PayPal iFrame integration</a></li>
								<li><a href="#ppal-special">Other special cases</a></li>
							</ul>
							</li>
							<li>
							<a href="BillPay.html">BillPay</a>
							<ul class="nav">
								<li><a href="#bp-requirement">Requirements</a></li>
								<li><a href="#bp-approval-api">BillPay Certification via API</a></li>
								<li><a href="#bp-assert">Assert</a></li>
								<li><a href="#bp-capt">Capture</a></li>
								<li><a href="#bp-approval-bo">BillPay Certification via Saferpay Backoffice</a></li>
							</ul>
							</li>
							<li>
							<a href="PostFinance.html">Swiss Postcard</a>
							<ul class="nav">
								<li><a href="#pf-requirement">Requirements</a></li>
								<li><a href="#pf-alias">Storage in the Secure Card Data Store</a></li>
								<li><a href="#pf-regdial">Registration Dialogue</a></li>
							</ul>
							</li>
							<li>
							<a href="sofort.html">SOFORT by Klarna</a>
							<ul class="nav">
								<li><a href="#sf-requirement">Requirements</a></li>
								<li><a href="#sf-newproject">Create a new project for SOFORT</a></li>
								<li><a href="#sf-iFrame">Sofort iFrame integration</a></li>
								<li><a href="#sf-refund">SEPA manual Refunds for Sofort</a></li>
							</ul>
							</li>
							<li class="active">
							<a href="KlarnaPayments.html">Klarna Payments</a>
							<ul class="nav">
								<li><a href="#klarna-req">Requirements</a></li>
								<li><a href="#klarna-activation">Activation</a></li>
								<li><a href="#klarna-testing">Testing Period</a></li>
								<li><a href="#klarna-integration">Integration</a></li>
							</ul>
							</li>
							<li>
							<a href="eps.html">eps</a>
							<ul class="nav">
								<li><a href="#eps-requirement">Requirements</a></li>
								<li><a href="#eps-newproject">How toget an EPS acceptance agreement</a></li>
							</ul>
							</li>
							<li>
							<a href="paydirekt.html">paydirekt</a>
							<ul class="nav">
								<li><a href="#pd-requirement">Requirements</a></li>
								<li><a href="#pd-address">Handling of delivery address</a></li>
								<li><a href="#pd-pending">Display of pending status for bookings</a></li>
								<li><a href="#pd-note">Notification after change from pending to final status</a></li>
								<li><a href="#pd-query">Querying the transaction status</a></li>
								<li><a href="#pd-refund">Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="ideal.html">iDeal</a>
							<ul class="nav">
								<li><a href="#ideal-requirement">Requirements</a></li>
								<li><a href="#ideal-timeout">Session Timeouts</a></li>
								<li><a href="#ideal-pre">Bank Pre-Selection</a></li>
								<li><a href="#ideal-refund">SEPA manual Refunds for iDeal</a></li>
							</ul>
							</li>
							<li>
							<a href="sepa.html">SEPA</a>
							<ul class="nav">
								<li><a href="#sepa-requirement">Requirements</a></li>
								<li><a href="#sepa-refund">SEPA manual Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="eprzelewy.md.html">ePrzelewy</a>
							<ul class="nav">
								<li><a href="#przelewy-requirement">Requirements</a></li>
							</ul>
							</li>
							<li>
							<a href="Alipay.html">Alipay</a>
							<ul class="nav">
								<li><a href="#alipay-requirement">Requirements</a></li>
								<li><a href="#alipay-general">General specifics</a></li>
							</ul>
							</li>
							<li>
							<a href="bancontact.html">Bancontact</a>
							<ul class="nav">
								<li><a href="#bancontact-requirement">Requirements</a></li>
								<li><a href="#bancontact-directmode">Bancontact Direct Mode</a></li>
								<li><a href="#bancontact-refund">Bancontact Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="applepay.html">ApplePay</a>
							<ul class="nav">
								<li><a href="#apple-requirement">Requirements</a></li>
								<li><a href="#apple-activation">Activation</a></li>
								<li><a href="#apple-redirect">Direct redirect</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Additional Information</h4></a>
							</li>
							<li>
							<a href="https://www.six-payment-services.com/de/site/e-commerce/learn-more/saferpay-blog.html" target="_blank">Saferpay Blog</a>
							</li>
							<li>
							<a href="contact.html">Contact</a>
							</li>
							<li>
							<a href="http://saferpay.github.io/jsonapi/" target="_blank">API Specification</a>
							</li>
							<li>
							<a href="https://saferpay.github.io/changelog/" target="_blank">Changelog</a>
							</li>

					</ul>
				</div>

				
<section><h1>Klarna Payments</h1><div class="row"><div class="col-sm-6"><div class="warning" style="min-height: 75px;">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;float: left;height: 75px;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Important:</strong> Klarna Payments is <strong>NOT</strong> the same as Sofort&#252;berweisung! Please refer to <a href="sofort.html">this chapter</a>, if you want to use Sofort&#252;berweisung!
  </p>
</div><p>Klarna Payments is a 3rd party payment method, that is split into three ways of payment:</p><ul>
<li>Pay Now: The order is payed now, via Direct Debit, or Bank Transfer.</li>
<li>Pay Later: The order is payed on invoice.</li>
<li>Slice it: The order is payed in installment rates, with an interest.</li>
</ul><p>These, together with the currencies, are defined in the Klarna contract and not on Saferpay side. With each start of a new transaction, Saferpay will ask Klarna for this information. If a currency was submitted with the <a href>Payment Page Initialize Request</a>, that isn't supported, or a certain payment category is not activated on the Klarna account, Saferpay will not show said option.</p><div class="warning" style="min-height: 75px;">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;float: left;height: 75px;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Important: This can also lead to Klarna Payments not being displayed altogether.</strong> So please make sure, that your Klarna account is set up correctly and that you use the correct currency!
  </p>
</div><p>This chapter details the technical implementation of Klarna Payments, through Saferpay.</p></div></div></section><section id="klarna-req"><h2><a name="klarna-req"></a> Requirements</h2><div class="row"><div class="col-sm-6"><p>The following requirements have to be met, in order to accept Klarna Payments via Saferpay:</p><ul>
<li>The corresponding Saferpay eCommerce licence and thus the existence of a valid identification with a username and password for the Saferpay system.</li>
<li>Availability of at least one active Saferpay E Commerce terminal, via which payment can be carried out and availability of the associated Saferpay TerminalId.</li>
<li>A valid contract with Klarna. Please contact <a href="mailto:worldline.sps@klarna.com">worldline.sps@klarna.com</a></li>
<li>Klarna Payments is only available via the <a href="Integration_PP.html">PaymentPage flow</a>!</li>
<li>SpecVersion 1.19 and up!</li>
</ul></div></div></section><section id="klarna-activation"><h2><a name="klarna-activation"></a> Activation</h2><div class="row"><div class="col-sm-6"><p>Unlike other payment methods, Klarna payments offers a self-onboarding service, which you can access inside the Backoffice under <strong>Settings &gt; Terminals</strong>. Please select the terminal you want Klarna activated on and scroll down to <strong>Self Service</strong>.</p><p><strong>This service handles differently, depending on the Saferpay environment (test|live) you are on, so please pay close attention.</strong></p><p>You'll have two options <strong>Klarna</strong> and additionally, on the Saferpay test-environment, <strong>Klarna Simulator</strong>.</p><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_self_service.png" alt="alt text"></p></div></div></section><section><h3>Klarna Simulator</h3><div class="row"><div class="col-sm-6"><p>The Klarna Simulator is a Sandbox provided by Saferpay, which provides an extensive GUI for testing Klarna.
In order to activate it, you first need to click on <strong>Configure</strong>. There you have to set user and password, which can be anything for the simulator.
However should you enter nothing, the simulator will simulate an error, as if no, or the wrong credentials have been entered. So if you want to test that case, you can do so. Then the <strong>Environment</strong> slider will simulate live and sandbox (Test) behavior, if you want, though the differences are slim.
Lastly, you have to activate the countries, you want to support Klarna in. More on that later.</p><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_settings_testing.png" alt="alt text" title="Klarna Simulator Configuration"></p><p>Once this is done, click on <strong>Save</strong>, however you also need to <strong>activate the Simulator</strong>, by clicking on the activation-slider:
<img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_self_service_simulator_on.png" alt="alt text" title="Klarna Simulator activated"></p><p>That is it! You can now use the Saferpay Klarna Simulator.
And this is the Simulator on the Payment Page. Note the indicator at the top, telling you, that you are using the Saferpay Simulator:</p><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/klarna_saferpay_simulator.png" alt="alte text" title="Saferpay Klarna Simulator"></p></div></div></section><section><h3>Klarna</h3><div class="row"><div class="col-sm-6"><p>Similar to the Klarna Simulator, it also requires the same level of configuration, like the countries, with the difference, that the user and password accept your real Klarna credentials.
Enter your user and password and configure your countries.</p><div class="info" style="min-height: 75px;">
  <span class="glyphicon glyphicon-info-sign" style="color: rgb(110, 199, 215);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Very Important:</strong> On the Saferpay Test Environment, the Klarna configuration exclusively works on the Klarna Sandbox! If you want to test on the Klarna Sandbox, you have to navigate to <a href="https://developers.klarna.com/">Klarna Developers</a> to create your Sandbox account.
  </p>
</div><p>Additionally, you also have the <strong>Test|Live</strong> slider, which does different things, depending on which Saferpay Environment you are currently on:</p><ul>
<li><strong>Test:</strong> On the Saferpay Test Environment, this option will <strong>always</strong> point towards the Klarna Sandbox!</li>
<li><strong>Production:</strong> On the Saferpay Production-Environment, this slider will switch between the Klarna Production and Sandbox. See the next sub-chapter on why this is necessary!</li>
</ul><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_settings.png" alt="alt text" title="Klarna Sandbox Configuration"></p><p>Once you have entered your credentials, configured your country and, if necessary, the environment enpoint, click on <strong>Save</strong>.
Lastly, make sure to <strong>activate Klarna</strong>, by clicking on the activation slider.</p><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_self_service_sandbox_on.png" alt="alt text" title="Klarna Sandbox activated"></p><p>This is the Klarna Sandbox on the Payment Page:</p><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/klarna_sandbox.png" alt="alt text" title="Klarna Sandbox running on Saferpay Payment Page"></p></div></div></section><section id="klarna-testing"><h2><a name="klarna-testing"></a> Testing period</h2><div class="row"><div class="col-sm-6"><p>Before you can accept live payments, Klarna requires a testing period.
During this period, Klarna will evaluate your business and integration, before they fully activate your account.
During this time, the <strong>Environment Slider</strong> inside the Klarna configuration under <strong>Settings &gt; Terminals</strong> inside the Saferpay Backoffice, has to be turned to <strong>Testing</strong>.
<img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/bo_klarna_settings_SliderTest.png" alt="alt text" title="Klarna Testing"></p><div class="warning" style="min-height: 75px;">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;float: left;height: 75px;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Important: On the live environment, always enter your live Klarna credentials, though these testing-transactions are running on the Klarna Sandbox!</strong> 
  </p>
</div></div></div></section><section id="klarna-integration"><h2><a name="klarna-integration"></a> Integration</h2><div class="row"><div class="col-sm-6"><p>Klarna requires certain datapoints to be submitted, in order for the processing to work.
Most importantly, you must submit the order cart, via the <strong>Order.Items[]</strong> array.
Here is a list of all the mandatory parameters, that need to be submitted:</p><div class="info" style="min-height: 75px;">
  <span class="glyphicon glyphicon-info-sign" style="color: rgb(110, 199, 215);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Info:</strong> Please also refer to the <a href="https://saferpay.github.io/jsonapi/#Payment_v1_PaymentPage_Initialize"> Payment Page Initialize request-specification</a> for more detailed information!
  </p>
</div><table class="table table-striped table-hover">
  <thead>
    <tr>
      <th class="text-center">Parameter</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="text-center"><strong>Payer.BillingAddress.CountryCode</strong></td>
      <td>The country your customer resides in. <strong>Make sure, that this country is activated in your Klarna settings (see above), or otherwise Klarna will not be displayed, as an option!</strong></td>
    </tr>
    <tr>
      <td class="text-center"><strong>Order.Items[].Type</strong></td>
      <td>Type of the Order Item.</td>
    </tr>
    <tr>
      <td class="text-center"><strong>Order.Items[].Quantity</strong></td>
      <td>Number of this specific item, sold to the customer.</td>
    </tr>
    <tr>
      <td class="text-center"><strong>Order.Items[].Name</strong></td>
      <td>Name of the product, defined by the merchant.</td>
    </tr>
    <tr>
      <td class="text-center"><strong>Order.Items[].UnitPrice</strong></td>
      <td>Single unit price of this specific item.</td>
    </tr>
  </tbody>
</table><div class="warning" style="min-height: 75px;">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;float: left;height: 75px;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Important:</strong> Make sure, that all the order cart items are included and that all the unit-prices add up with the total amount set in <strong>Payment.Amount.Value</strong>. Otherwise Klarna may reject the payment. Additionally, make also sure, that <strong>Payment.Amount.CurrencyCode</strong> also  is in-line with <strong>Payer.BillingAddress.CountryCode</strong>! For instance: Submitting &quot;CH&quot; for Swizerland as your CountryCode, but selecting EUR as your currency, will cause Klarna to not be displayed!
  </p>
</div><p>Furthermore, for merchants in the European Union, Klarna highly recommends to also set the following parameters:</p><table class="table table-striped table-hover">
  <thead>
    <tr>
      <th class="text-center">Parameter</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="text-center"><strong>Order.Items[].TaxRate</strong></td>
      <td>Tax rate, applied to this order-item, depending on the country.</td>
    </tr>
    <tr>
      <td class="text-center"><strong>Order.Items[].TaxAmount</strong></td>
      <td>Tax amount for a single item.</td>
    </tr>
  </tbody>
</table></div></div></section><section><h3>Example</h3><div class="row"><div class="col-sm-6"><pre><code class="language-json">  &quot;Payer&quot;: {
    &quot;BillingAddress&quot;: {
      &quot;FirstName&quot;: &quot;John&quot;,
      &quot;LastName&quot;: &quot;Doe&quot;,
      &quot;Email&quot;: &quot;john.doe@provider.com&quot;,
      &quot;CountryCode&quot;: &quot;de&quot;
    }
  },
  &quot;Order&quot;: {
    &quot;Items&quot;: [
      {
        &quot;Type&quot;: &quot;DIGITAL&quot;,
        &quot;Quantity&quot;: 1,
        &quot;Name&quot;: &quot;Test product&quot;,
        &quot;UnitPrice&quot;: 245
      }
    ]
  },
</code></pre></div></div></section><section><h3>Address</h3><div class="row"><div class="col-sm-6"><p>Klarna requires the Billing Address to be set. There are two options you have, on how this is done.</p><ol>
<li>The address is captured during the payment process, where the customer has to enter it him/herself:
<img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/klarna_address_form.png" alt="alt text" title="Address entry form"></li>
<li>If you already have the address stored in your shop, you can also submit it, with the <a href>Payment Page Initialize Request</a>, inside the <strong>Payer.BillingAddress</strong> container. In this case the address-form will be skipped.</li>
</ol></div></div></section><section><h3>Example</h3><div class="row"><div class="col-sm-6"><pre><code class="language-json">&quot;Payer&quot;: {
    &quot;BillingAddress&quot;: {
        &quot;FirstName&quot;: &quot;John&quot;,
        &quot;LastName&quot;: &quot;Doe&quot;,
        &quot;Email&quot;: &quot;john.doe@provider.com&quot;,
        &quot;CountryCode&quot;: &quot;de&quot;,
        &quot;Gender&quot;: &quot;MALE&quot;,
        &quot;Street&quot;: &quot;Fakestreet 1&quot;,
        &quot;Zip&quot;:&quot;12345&quot;,
        &quot;City&quot;:&quot;Notown&quot;,
        &quot;DateOfBirth&quot;: &quot;1990-03-17&quot;,
        &quot;Phone&quot;: &quot;+491234659870&quot;
    }
},
</code></pre></div></div></section>

			</main>

		</div>
	</div>

	<div class="scroll-top-wrapper">
		<a href="#top" class="scroll-top-inner" onclick="$('html,body').animate({ scrollTop: 0 }, 'slow'); return false;">
			<span class="glyphicon glyphicon-chevron-up"></span> Back to Top
		</a>
	</div>

	<script src="assets/js/vendors.js"></script>
	<script src="assets/js/helppage.js"></script>
</body>
</html>


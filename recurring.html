<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<link rel="stylesheet" href="assets/css/vendors.css" />
	<link rel="stylesheet" href="assets/css/helppage.css">

	<title>Saferpay documentation | Integration Guide</title>
</head>
<body data-spy="scroll" data-target="#navScrollspy">

	<div id="content" class="container-fluid">
		<div>
			<nav class="hidden-xs hidden-sm hidden-md" id="navScrollspy">
				<div data-spy="affix" class="affix">

					<h3>
						<span style="font-size: x-large; font-weight: bold">Saferpay</span>
						<span class="text-primary">Integration Guide</span>
					</h3>

					<ul class="nav">
							<li>
							<a href="index.html">Introduction</a>
							<ul class="nav">
								<li><a href="#intro-requirement">Requirements</a></li>
								<li><a href="#pci">Data Security and PCI DSS</a></li>
								<li><a href="#3ds">3-D Secure</a></li>
								<li><a href="#dcc">Dynamic Currency Conversion</a></li>
								<li><a href="#version">Versioning</a></li>
								<li><a href="#pm-functions">Payment Method Features</a></li>
								<li><a href="#capture-batch">Capture and Daily Closing</a></li>
								<li><a href="#capture">Capture</a></li>
								<li><a href="#closing">Daily Closing</a></li>
								<li><a href="#special">Special Cases</a></li>
								<li><a href="#reservation">Reservation-Times</a></li>
							</ul>
							</li>
							<li>
							<a href="Interfaces.html">Licenses and Interfaces</a>
							<ul class="nav">
								<li><a href="#interfaces">The Interfaces</a></li>
								<li><a href="#int-paymentmethods">Supported Payment Methods</a></li>
								<li><a href="#int-what">What should i use?</a></li>
								<li><a href="#int-questions">Questions?</a></li>
							</ul>
							</li>
							<li>
							<a href="psd2.html">PSD2</a>
							<ul class="nav">
								<li><a href="#psd2-apply">Does PSD2 apply to me?</a></li>
								<li><a href="#psd2-when">When to do SCA</a></li>
								<li><a href="#psd2-overview">Overview</a></li>
								<li><a href="#psd2-force">Whenand how to force SCA</a></li>
								<li><a href="#psd2-exemptions">Exemptions</a></li>
								<li><a href="#psd2-decline">Soft Decline</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_PP.html">Payment Page Interface</a>
							<ul class="nav">
								<li><a href="#pp-initialize">PaymentPage Initialize</a></li>
								<li><a href="#pp-initialize-response">PaymentPage Initialize Response</a></li>
								<li><a href="#pp-transaction">Redirect and Transaction</a></li>
								<li><a href="#pp-retshop">Return to the Shop</a></li>
								<li><a href="#pp-assert">PaymentPage Assert</a></li>
								<li><a href="#pp-captcancel">Capture or Cancel</a></li>
								<li><a href="#pp-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="SaferpayFields.html">Saferpay Fields</a>
							<ul class="nav">
								<li><a href="#hf-flow">Basic Flow</a></li>
								<li><a href="#hf-prep">Preparation</a></li>
								<li><a href="#hf-integration">Integration and Initialization</a></li>
								<li><a href="#hf-class">SaferpayFields - Class functions</a></li>
								<li><a href="#hf-example">Examples</a></li>
								<li><a href="#hf-transaction">Executing the Transaction</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_trx.html">Transaction Interface</a>
							<ul class="nav">
								<li><a href="#trx-cc">Credit Cards</a></li>
								<li><a href="#trx-ini">Transaction Initialize</a></li>
								<li><a href="#trx-iframe">RedirectUrl inside iframe</a></li>
								<li><a href="#trx-3ds">3-D Secure and DCC</a></li>
								<li><a href="#trx-retshop">Return to the Shop</a></li>
								<li><a href="#trx-ta">Transaction Authorize</a></li>
								<li><a href="#trx-captcancel">Capture or Cancel</a></li>
								<li><a href="#trx-sepa">SEPA Direct Debit</a></li>
								<li><a href="#trx-demo">Try it!</a></li>
								<li><a href="#trx-post">Using your own HTML-Form</a></li>
							</ul>
							</li>
							<li>
							<a href="scd.html">Secure Card Data</a>
							<ul class="nav">
								<li><a href="#scd-req">Requirements</a></li>
								<li><a href="#scd-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#scd-pp">Secure Card Data and the Payment Page</a></li>
								<li><a href="#scd-trx">Secure Card Data and the Transaction Interface</a></li>
								<li><a href="#scd-sa">Standalone Secure Card Data registration</a></li>
								<li><a href="#scd-check">The Check function</a></li>
								<li><a href="#scd-generator">The Id-generator</a></li>
								<li><a href="#scd-use">How to use the obtained data</a></li>
							</ul>
							</li>
							<li class="active">
							<a href="recurring.html">Recurring Payments</a>
							<ul class="nav">
								<li><a href="#recurring-req">Requirements</a></li>
								<li><a href="#recurring-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#recurring-referenced">Referenced  Transactions Method</a></li>
								<li><a href="#recurring-auto">Automating the Recurring Payments</a></li>
							</ul>
							</li>
							<li>
							<a href="refund.html">Refunds via API</a>
							<ul class="nav">
								<li><a href="#refund-req">Requirements</a></li>
								<li><a href="#refund-reference">Method 1: Refernced refunds</a></li>
								<li><a href="#refund-demo">Try it!</a></li>
								<li><a href="#refund-alias">Method 2: Refunds using an alias</a></li>
								<li><a href="#refund-capture">Capture</a></li>
								<li><a href="#refund-cancel">Difference, between Cancel and Refund</a></li>
								<li><a href="#refund-info">Additional information</a></li>
							</ul>
							</li>
							<li>
							<a href="Inquire.html">Inquire Interface</a>
							<ul class="nav">
								<li><a href="#inquire-rules">Rules and limitations</a></li>
								<li><a href="#inquire-examples">Examples</a></li>
							</ul>
							</li>
							<li>
							<a href="app-integration.html">Mobile App integration</a>
							<ul class="nav">
								<li><a href="#mobile-process">Process</a></li>
								<li><a href="#mobile-faq">FAQ</a></li>
							</ul>
							</li>
							<li>
							<a href="CssiFrame.html">IFrame Integration and CSS</a>
							<ul class="nav">
								<li><a href="#css-iframe">Iframe Integration</a></li>
								<li><a href="#css-pp">Payment Page</a></li>
								<li><a href="#css-trxini">Transaction Initialize</a></li>
								<li><a href="#css-aliasins">Alias Insert</a></li>
								<li><a href="#css-iframe_size">Size of the Iframe</a></li>
								<li><a href="#css-usecss">Using CSS</a></li>
								<li><a href="#css-element">CSS Elements</a></li>
								<li><a href="#css-selector">CSS Selectors</a></li>
								<li><a href="#css-info">Additional Info</a></li>
							</ul>
							</li>
							<li>
							<a href="partialcaptures.html">Partial Captures</a>
							<ul class="nav">
								<li><a href="#pc-req">Requirements</a></li>
								<li><a href="#pc-exec">Executing a Multipart Capture</a></li>
								<li><a href="#pc-final">Finalizing a Capture-Chain</a></li>
								<li><a href="#pc-final-why">Why do you need to finalize a transaction?</a></li>
								<li><a href="#pc-refund">Handling Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="marketplace.html">Marketplace</a>
							<ul class="nav">
								<li><a href="#mark-req">Requirements</a></li>
								<li><a href="#mark-submerchants">Submerchants</a></li>
								<li><a href="#mark-fee">Applying Fees</a></li>
							</ul>
							</li>
							<li>
							<a href="spg.html">Secure PayGate REST API</a>
							<ul class="nav">
								<li><a href="#spg-req">Requirements</a></li>
								<li><a href="#spg-config">Secure PayGate configuration</a></li>
								<li><a href="#spg-api">The REST API</a></li>
								<li><a href="#spg-json">Connecting the JSON API</a></li>
								<li><a href="#spg-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="health.html">API Health Check</a>
							</li>
							<li>
							<a href="faq.html">FAQ</a>
							</li>
							<li>
							<a href="paymentmeans.html">Payment means for testing</a>
							<ul class="nav">
								<li><a href="#pm-visa">VISA</a></li>
								<li><a href="#pm-mc">Mastercard</a></li>
								<li><a href="#pm-amex">American Express</a></li>
								<li><a href="#pm-diners">Diners Club</a></li>
								<li><a href="#pm-maestro">Maestro international</a></li>
								<li><a href="#pm-jcb">JCB</a></li>
								<li><a href="#pm-myone">My One</a></li>
								<li><a href="#pm-bonus">Bonus Card</a></li>
								<li><a href="#pm-bc">Bancontact</a></li>
								<li><a href="#pm-sepa">SEPA Direct Debit</a></li>
								<li><a href="#pm-paypal">PayPal</a></li>
								<li><a href="#pm-twint">TWINT</a></li>
								<li><a href="#ideal-cards">iDeal</a></li>
								<li><a href="#paydirekt-cards">paydirekt</a></li>
								<li><a href="#unionpay-cards">UnionPay</a></li>
								<li><a href="#postfinance-cards">Postfinance</a></li>
								<li><a href="#applepay-cards">Apple Pay</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Demo</h4></a>
							</li>
							<li>
							<a href="https://shop.saferpay.eu/saferpayintegration" target="_blank">Saferpay Demo Environment</a>
							</li>
							<li>
								<a><h4>Payment Method specifics</h4></a>
							</li>
							<li>
							<a href="creditcards.html">Credit Cards</a>
							<ul class="nav">
								<li><a href="#cc-chase">Chase Paymentech</a></li>
							</ul>
							</li>
							<li>
							<a href="Masterpass.html">Masterpass</a>
							<ul class="nav">
								<li><a href="#mp-req">Requirements</a></li>
								<li><a href="#mp-pp">Masterpass via Payment Page</a></li>
								<li><a href="#mp-special">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Twint.html">TWINT</a>
							<ul class="nav">
								<li><a href="#twint-requirement">Requirements</a></li>
								<li><a href="#twint-general">General specifics</a></li>
								<li><a href="#twint-uof">Twint User on File</a></li>
							</ul>
							</li>
							<li>
							<a href="PayPal.html">PayPal</a>
							<ul class="nav">
								<li><a href="#ppal-requirement">Requirements</a></li>
								<li><a href="#ppal-api-access">Grant API Approval for Saferpay</a></li>
								<li><a href="#ppal-capture">Capture and the solvency of the customer</a></li>
								<li><a href="#ppal-iframe">PayPal iFrame integration</a></li>
								<li><a href="#ppal-special">Other special cases</a></li>
							</ul>
							</li>
							<li>
							<a href="BillPay.html">BillPay</a>
							<ul class="nav">
								<li><a href="#bp-requirement">Requirements</a></li>
								<li><a href="#bp-approval-api">BillPay Certification via API</a></li>
								<li><a href="#bp-assert">Assert</a></li>
								<li><a href="#bp-capt">Capture</a></li>
								<li><a href="#bp-approval-bo">BillPay Certification via Saferpay Backoffice</a></li>
							</ul>
							</li>
							<li>
							<a href="PostFinance.html">Swiss Postcard</a>
							<ul class="nav">
								<li><a href="#pf-requirement">Requirements</a></li>
								<li><a href="#pf-alias">Storage in the Secure Card Data Store</a></li>
								<li><a href="#pf-regdial">Registration Dialogue</a></li>
							</ul>
							</li>
							<li>
							<a href="sofort.html">SOFORT by Klarna</a>
							<ul class="nav">
								<li><a href="#sf-requirement">Requirements</a></li>
								<li><a href="#sf-newproject">Create a new project for SOFORT</a></li>
								<li><a href="#sf-iFrame">Sofort iFrame integration</a></li>
								<li><a href="#sf-refund">SEPA manual Refunds for Sofort</a></li>
							</ul>
							</li>
							<li>
							<a href="eps.html">eps</a>
							<ul class="nav">
								<li><a href="#eps-requirement">Requirements</a></li>
								<li><a href="#eps-newproject">How toget an EPS acceptance agreement</a></li>
							</ul>
							</li>
							<li>
							<a href="paydirekt.html">paydirekt</a>
							<ul class="nav">
								<li><a href="#pd-requirement">Requirements</a></li>
								<li><a href="#pd-address">Handling of delivery address</a></li>
								<li><a href="#pd-pending">Display of pending status for bookings</a></li>
								<li><a href="#pd-note">Notification after change from pending to final status</a></li>
								<li><a href="#pd-query">Querying the transaction status</a></li>
								<li><a href="#pd-refund">Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="ideal.html">iDeal</a>
							<ul class="nav">
								<li><a href="#ideal-requirement">Requirements</a></li>
								<li><a href="#ideal-timeout">Session Timeouts</a></li>
								<li><a href="#ideal-pre">Bank Pre-Selection</a></li>
								<li><a href="#ideal-refund">SEPA manual Refunds for iDeal</a></li>
							</ul>
							</li>
							<li>
							<a href="sepa.html">SEPA</a>
							<ul class="nav">
								<li><a href="#sepa-requirement">Requirements</a></li>
								<li><a href="#sepa-refund">SEPA manual Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="eprzelewy.md.html">ePrzelewy</a>
							<ul class="nav">
								<li><a href="#przelewy-requirement">Requirements</a></li>
							</ul>
							</li>
							<li>
							<a href="Alipay.html">Alipay</a>
							<ul class="nav">
								<li><a href="#alipay-requirement">Requirements</a></li>
								<li><a href="#alipay-general">General specifics</a></li>
							</ul>
							</li>
							<li>
							<a href="bancontact.html">Bancontact</a>
							<ul class="nav">
								<li><a href="#bancontact-requirement">Requirements</a></li>
								<li><a href="#bancontact-directmode">Bancontact Direct Mode</a></li>
								<li><a href="#bancontact-refund">Bancontact Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="applepay.html">ApplePay</a>
							<ul class="nav">
								<li><a href="#apple-requirement">Requirements</a></li>
								<li><a href="#apple-activation">Activation</a></li>
								<li><a href="#apple-redirect">Direct redirect</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Additional Information</h4></a>
							</li>
							<li>
							<a href="https://www.six-payment-services.com/de/site/e-commerce/learn-more/saferpay-blog.html" target="_blank">Saferpay Blog</a>
							</li>
							<li>
							<a href="contact.html">Contact</a>
							</li>
							<li>
							<a href="http://saferpay.github.io/jsonapi/" target="_blank">API Specification</a>
							</li>
							<li>
							<a href="https://saferpay.github.io/changelog/" target="_blank">Changelog</a>
							</li>
							<li>
							<a href="glossary.html">Glossary</a>
							</li>

					</ul>
				</div>
			</nav>

			<span class="print-page-break"></span>

			<main>
				<div class="hidden-print hidden-lg">
					<div id="navCollapse">

						<button class="menu-btn" type="button" data-toggle="collapse" data-target="#menu-collapse">
							<span class="glyphicon glyphicon-menu-hamburger"></span>
							<h3 style="display: inline-block">
								<span style="font-size: x-large; font-weight: bold">Saferpay</span>
								<span class="text-primary">Integration Guide</span>
							</h3>
						</button>

					</div>

					<ul class="nav collapse" id="menu-collapse">
							<li>
							<a href="index.html">Introduction</a>
							<ul class="nav">
								<li><a href="#intro-requirement">Requirements</a></li>
								<li><a href="#pci">Data Security and PCI DSS</a></li>
								<li><a href="#3ds">3-D Secure</a></li>
								<li><a href="#dcc">Dynamic Currency Conversion</a></li>
								<li><a href="#version">Versioning</a></li>
								<li><a href="#pm-functions">Payment Method Features</a></li>
								<li><a href="#capture-batch">Capture and Daily Closing</a></li>
								<li><a href="#capture">Capture</a></li>
								<li><a href="#closing">Daily Closing</a></li>
								<li><a href="#special">Special Cases</a></li>
								<li><a href="#reservation">Reservation-Times</a></li>
							</ul>
							</li>
							<li>
							<a href="Interfaces.html">Licenses and Interfaces</a>
							<ul class="nav">
								<li><a href="#interfaces">The Interfaces</a></li>
								<li><a href="#int-paymentmethods">Supported Payment Methods</a></li>
								<li><a href="#int-what">What should i use?</a></li>
								<li><a href="#int-questions">Questions?</a></li>
							</ul>
							</li>
							<li>
							<a href="psd2.html">PSD2</a>
							<ul class="nav">
								<li><a href="#psd2-apply">Does PSD2 apply to me?</a></li>
								<li><a href="#psd2-when">When to do SCA</a></li>
								<li><a href="#psd2-overview">Overview</a></li>
								<li><a href="#psd2-force">Whenand how to force SCA</a></li>
								<li><a href="#psd2-exemptions">Exemptions</a></li>
								<li><a href="#psd2-decline">Soft Decline</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_PP.html">Payment Page Interface</a>
							<ul class="nav">
								<li><a href="#pp-initialize">PaymentPage Initialize</a></li>
								<li><a href="#pp-initialize-response">PaymentPage Initialize Response</a></li>
								<li><a href="#pp-transaction">Redirect and Transaction</a></li>
								<li><a href="#pp-retshop">Return to the Shop</a></li>
								<li><a href="#pp-assert">PaymentPage Assert</a></li>
								<li><a href="#pp-captcancel">Capture or Cancel</a></li>
								<li><a href="#pp-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="SaferpayFields.html">Saferpay Fields</a>
							<ul class="nav">
								<li><a href="#hf-flow">Basic Flow</a></li>
								<li><a href="#hf-prep">Preparation</a></li>
								<li><a href="#hf-integration">Integration and Initialization</a></li>
								<li><a href="#hf-class">SaferpayFields - Class functions</a></li>
								<li><a href="#hf-example">Examples</a></li>
								<li><a href="#hf-transaction">Executing the Transaction</a></li>
							</ul>
							</li>
							<li>
							<a href="Integration_trx.html">Transaction Interface</a>
							<ul class="nav">
								<li><a href="#trx-cc">Credit Cards</a></li>
								<li><a href="#trx-ini">Transaction Initialize</a></li>
								<li><a href="#trx-iframe">RedirectUrl inside iframe</a></li>
								<li><a href="#trx-3ds">3-D Secure and DCC</a></li>
								<li><a href="#trx-retshop">Return to the Shop</a></li>
								<li><a href="#trx-ta">Transaction Authorize</a></li>
								<li><a href="#trx-captcancel">Capture or Cancel</a></li>
								<li><a href="#trx-sepa">SEPA Direct Debit</a></li>
								<li><a href="#trx-demo">Try it!</a></li>
								<li><a href="#trx-post">Using your own HTML-Form</a></li>
							</ul>
							</li>
							<li>
							<a href="scd.html">Secure Card Data</a>
							<ul class="nav">
								<li><a href="#scd-req">Requirements</a></li>
								<li><a href="#scd-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#scd-pp">Secure Card Data and the Payment Page</a></li>
								<li><a href="#scd-trx">Secure Card Data and the Transaction Interface</a></li>
								<li><a href="#scd-sa">Standalone Secure Card Data registration</a></li>
								<li><a href="#scd-check">The Check function</a></li>
								<li><a href="#scd-generator">The Id-generator</a></li>
								<li><a href="#scd-use">How to use the obtained data</a></li>
							</ul>
							</li>
							<li class="active">
							<a href="recurring.html">Recurring Payments</a>
							<ul class="nav">
								<li><a href="#recurring-req">Requirements</a></li>
								<li><a href="#recurring-payment-methods">Supported Payment Methods</a></li>
								<li><a href="#recurring-referenced">Referenced  Transactions Method</a></li>
								<li><a href="#recurring-auto">Automating the Recurring Payments</a></li>
							</ul>
							</li>
							<li>
							<a href="refund.html">Refunds via API</a>
							<ul class="nav">
								<li><a href="#refund-req">Requirements</a></li>
								<li><a href="#refund-reference">Method 1: Refernced refunds</a></li>
								<li><a href="#refund-demo">Try it!</a></li>
								<li><a href="#refund-alias">Method 2: Refunds using an alias</a></li>
								<li><a href="#refund-capture">Capture</a></li>
								<li><a href="#refund-cancel">Difference, between Cancel and Refund</a></li>
								<li><a href="#refund-info">Additional information</a></li>
							</ul>
							</li>
							<li>
							<a href="Inquire.html">Inquire Interface</a>
							<ul class="nav">
								<li><a href="#inquire-rules">Rules and limitations</a></li>
								<li><a href="#inquire-examples">Examples</a></li>
							</ul>
							</li>
							<li>
							<a href="app-integration.html">Mobile App integration</a>
							<ul class="nav">
								<li><a href="#mobile-process">Process</a></li>
								<li><a href="#mobile-faq">FAQ</a></li>
							</ul>
							</li>
							<li>
							<a href="CssiFrame.html">IFrame Integration and CSS</a>
							<ul class="nav">
								<li><a href="#css-iframe">Iframe Integration</a></li>
								<li><a href="#css-pp">Payment Page</a></li>
								<li><a href="#css-trxini">Transaction Initialize</a></li>
								<li><a href="#css-aliasins">Alias Insert</a></li>
								<li><a href="#css-iframe_size">Size of the Iframe</a></li>
								<li><a href="#css-usecss">Using CSS</a></li>
								<li><a href="#css-element">CSS Elements</a></li>
								<li><a href="#css-selector">CSS Selectors</a></li>
								<li><a href="#css-info">Additional Info</a></li>
							</ul>
							</li>
							<li>
							<a href="partialcaptures.html">Partial Captures</a>
							<ul class="nav">
								<li><a href="#pc-req">Requirements</a></li>
								<li><a href="#pc-exec">Executing a Multipart Capture</a></li>
								<li><a href="#pc-final">Finalizing a Capture-Chain</a></li>
								<li><a href="#pc-final-why">Why do you need to finalize a transaction?</a></li>
								<li><a href="#pc-refund">Handling Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="marketplace.html">Marketplace</a>
							<ul class="nav">
								<li><a href="#mark-req">Requirements</a></li>
								<li><a href="#mark-submerchants">Submerchants</a></li>
								<li><a href="#mark-fee">Applying Fees</a></li>
							</ul>
							</li>
							<li>
							<a href="spg.html">Secure PayGate REST API</a>
							<ul class="nav">
								<li><a href="#spg-req">Requirements</a></li>
								<li><a href="#spg-config">Secure PayGate configuration</a></li>
								<li><a href="#spg-api">The REST API</a></li>
								<li><a href="#spg-json">Connecting the JSON API</a></li>
								<li><a href="#spg-demo">Try it!</a></li>
							</ul>
							</li>
							<li>
							<a href="health.html">API Health Check</a>
							</li>
							<li>
							<a href="faq.html">FAQ</a>
							</li>
							<li>
							<a href="paymentmeans.html">Payment means for testing</a>
							<ul class="nav">
								<li><a href="#pm-visa">VISA</a></li>
								<li><a href="#pm-mc">Mastercard</a></li>
								<li><a href="#pm-amex">American Express</a></li>
								<li><a href="#pm-diners">Diners Club</a></li>
								<li><a href="#pm-maestro">Maestro international</a></li>
								<li><a href="#pm-jcb">JCB</a></li>
								<li><a href="#pm-myone">My One</a></li>
								<li><a href="#pm-bonus">Bonus Card</a></li>
								<li><a href="#pm-bc">Bancontact</a></li>
								<li><a href="#pm-sepa">SEPA Direct Debit</a></li>
								<li><a href="#pm-paypal">PayPal</a></li>
								<li><a href="#pm-twint">TWINT</a></li>
								<li><a href="#ideal-cards">iDeal</a></li>
								<li><a href="#paydirekt-cards">paydirekt</a></li>
								<li><a href="#unionpay-cards">UnionPay</a></li>
								<li><a href="#postfinance-cards">Postfinance</a></li>
								<li><a href="#applepay-cards">Apple Pay</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Demo</h4></a>
							</li>
							<li>
							<a href="https://shop.saferpay.eu/saferpayintegration" target="_blank">Saferpay Demo Environment</a>
							</li>
							<li>
								<a><h4>Payment Method specifics</h4></a>
							</li>
							<li>
							<a href="creditcards.html">Credit Cards</a>
							<ul class="nav">
								<li><a href="#cc-chase">Chase Paymentech</a></li>
							</ul>
							</li>
							<li>
							<a href="Masterpass.html">Masterpass</a>
							<ul class="nav">
								<li><a href="#mp-req">Requirements</a></li>
								<li><a href="#mp-pp">Masterpass via Payment Page</a></li>
								<li><a href="#mp-special">Special Cases</a></li>
							</ul>
							</li>
							<li>
							<a href="Twint.html">TWINT</a>
							<ul class="nav">
								<li><a href="#twint-requirement">Requirements</a></li>
								<li><a href="#twint-general">General specifics</a></li>
								<li><a href="#twint-uof">Twint User on File</a></li>
							</ul>
							</li>
							<li>
							<a href="PayPal.html">PayPal</a>
							<ul class="nav">
								<li><a href="#ppal-requirement">Requirements</a></li>
								<li><a href="#ppal-api-access">Grant API Approval for Saferpay</a></li>
								<li><a href="#ppal-capture">Capture and the solvency of the customer</a></li>
								<li><a href="#ppal-iframe">PayPal iFrame integration</a></li>
								<li><a href="#ppal-special">Other special cases</a></li>
							</ul>
							</li>
							<li>
							<a href="BillPay.html">BillPay</a>
							<ul class="nav">
								<li><a href="#bp-requirement">Requirements</a></li>
								<li><a href="#bp-approval-api">BillPay Certification via API</a></li>
								<li><a href="#bp-assert">Assert</a></li>
								<li><a href="#bp-capt">Capture</a></li>
								<li><a href="#bp-approval-bo">BillPay Certification via Saferpay Backoffice</a></li>
							</ul>
							</li>
							<li>
							<a href="PostFinance.html">Swiss Postcard</a>
							<ul class="nav">
								<li><a href="#pf-requirement">Requirements</a></li>
								<li><a href="#pf-alias">Storage in the Secure Card Data Store</a></li>
								<li><a href="#pf-regdial">Registration Dialogue</a></li>
							</ul>
							</li>
							<li>
							<a href="sofort.html">SOFORT by Klarna</a>
							<ul class="nav">
								<li><a href="#sf-requirement">Requirements</a></li>
								<li><a href="#sf-newproject">Create a new project for SOFORT</a></li>
								<li><a href="#sf-iFrame">Sofort iFrame integration</a></li>
								<li><a href="#sf-refund">SEPA manual Refunds for Sofort</a></li>
							</ul>
							</li>
							<li>
							<a href="eps.html">eps</a>
							<ul class="nav">
								<li><a href="#eps-requirement">Requirements</a></li>
								<li><a href="#eps-newproject">How toget an EPS acceptance agreement</a></li>
							</ul>
							</li>
							<li>
							<a href="paydirekt.html">paydirekt</a>
							<ul class="nav">
								<li><a href="#pd-requirement">Requirements</a></li>
								<li><a href="#pd-address">Handling of delivery address</a></li>
								<li><a href="#pd-pending">Display of pending status for bookings</a></li>
								<li><a href="#pd-note">Notification after change from pending to final status</a></li>
								<li><a href="#pd-query">Querying the transaction status</a></li>
								<li><a href="#pd-refund">Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="ideal.html">iDeal</a>
							<ul class="nav">
								<li><a href="#ideal-requirement">Requirements</a></li>
								<li><a href="#ideal-timeout">Session Timeouts</a></li>
								<li><a href="#ideal-pre">Bank Pre-Selection</a></li>
								<li><a href="#ideal-refund">SEPA manual Refunds for iDeal</a></li>
							</ul>
							</li>
							<li>
							<a href="sepa.html">SEPA</a>
							<ul class="nav">
								<li><a href="#sepa-requirement">Requirements</a></li>
								<li><a href="#sepa-refund">SEPA manual Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="eprzelewy.md.html">ePrzelewy</a>
							<ul class="nav">
								<li><a href="#przelewy-requirement">Requirements</a></li>
							</ul>
							</li>
							<li>
							<a href="Alipay.html">Alipay</a>
							<ul class="nav">
								<li><a href="#alipay-requirement">Requirements</a></li>
								<li><a href="#alipay-general">General specifics</a></li>
							</ul>
							</li>
							<li>
							<a href="bancontact.html">Bancontact</a>
							<ul class="nav">
								<li><a href="#bancontact-requirement">Requirements</a></li>
								<li><a href="#bancontact-directmode">Bancontact Direct Mode</a></li>
								<li><a href="#bancontact-refund">Bancontact Refunds</a></li>
							</ul>
							</li>
							<li>
							<a href="applepay.html">ApplePay</a>
							<ul class="nav">
								<li><a href="#apple-requirement">Requirements</a></li>
								<li><a href="#apple-activation">Activation</a></li>
								<li><a href="#apple-redirect">Direct redirect</a></li>
							</ul>
							</li>
							<li>
								<a><h4>Additional Information</h4></a>
							</li>
							<li>
							<a href="https://www.six-payment-services.com/de/site/e-commerce/learn-more/saferpay-blog.html" target="_blank">Saferpay Blog</a>
							</li>
							<li>
							<a href="contact.html">Contact</a>
							</li>
							<li>
							<a href="http://saferpay.github.io/jsonapi/" target="_blank">API Specification</a>
							</li>
							<li>
							<a href="https://saferpay.github.io/changelog/" target="_blank">Changelog</a>
							</li>
							<li>
							<a href="glossary.html">Glossary</a>
							</li>

					</ul>
				</div>

				
<section><h1>Recurring Payments</h1><div class="row"><div class="col-sm-6"><p>Recurring payments are transactions processed on a regular basis under a pre-authorized agreement. They are particularly interesting for subscription or instalment business models. This chapter describes the main concept on how the perform recurring payments.</p><div class="danger">
  <span class="glyphicon glyphicon-remove-sign" style="color: rgb(224, 122, 105);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
      <p><strong>Very Important:</strong> Please also consider the <a href="psd2.html">PSD2 chapter</a>, when executing recurring payments!
      </p>
</div><br><div class="warning">
      <p><strong>NOTE: </strong>Before you start, you have to consider the following: Each transaction has to be triggered by you your system. Please see <strong>Automating the Recurring Payments</strong> further down in this chapter!</p>
</div><ul>
<li>Transaction Referenced Method -  <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_AuthorizeReferenced">AuthorizeReferenced Function</a> with the TransactionId of the initial transaction</li>
</ul></div></div></section><section id="recurring-req"><h2><a name="recurring-req"></a> Requirements:</h2><div class="row"><div class="col-sm-6"><ul>
<li>a Saferpay Business License</li>
<li>a valid login access with a username and password for the Saferpay Backoffice.</li>
<li>one active Saferpay ecommerce terminal via which payment can be carried out and the associated</li>
<li>Saferpay terminal number (TerminalId parameter) and Saferpay customer number (CustomerId parameter).</li>
<li>valid acceptance agreement for credit cards or other payment methods</li>
</ul><hr></div></div></section><section id="recurring-payment-methods"><h2><a name="recurring-payment-methods"></a> Supported Payment Methods:</h2><div class="row"><div class="col-sm-6"><p>Recurring payments are supported by the following payment means:</p><ul>
<li>American Express</li>
<li>Bancontact (SCD method only)</li>
<li>Postcard (SCD method only)</li>
<li>Bonus Card</li>
<li>Diners Club</li>
<li>Discover</li>
<li>JCB</li>
<li>Maestro International (SCD method only)</li>
<li>MasterCard</li>
<li>Myone</li>
<li>Sepa Direct Debit</li>
<li>Visa</li>
<li>VPAY</li>
</ul><hr></div></div></section><section id="recurring-referenced"><h2><a name="recurring-referenced"></a> Recurring Payments with the Referenced Transactions Method</h2><div class="row"><div class="col-sm-6"><p>With this method, the initial transaction is performed with either the PaymentPage Interface or with the Transaction Interface leading the cardholder through a normal ecommerce payment process, including entering the CVC and 3DSecure authentication. The first transaction is flagged as initial transaction. The Transaction ID of the initial transaction can then be used for referenced/recurring transactions.</p></div></div></section><section><h3>1. Initial Transaction:</h3><div class="row"><div class="col-sm-6"><p>The Initial Transaction can be performed with the <a href="Integration_PP.html">PaymentPage Interface</a> or via the <a href="Integration_trx.html">Transaction Interface</a>, using <strong>Transaction Initialize</strong> and <strong>Transaction Authorize</strong> .</p><p>This transaction basically captures the credit card details and sets a flag, to mark it as an initial transaction that can be used as a reference for recurring transactions.</p><p>To define a transaction as the initial transaction, you need to set a special flag with either the <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_PaymentPage_Initialize" title="PaymentPage Initialize">PaymentPage Initialize Request</a> or <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_Initialize" title="Transaction Initialize">Transaction Initialize Request</a> by defining the Container</p><pre><code class="language-json">Recurring&quot;: {
      &quot;Initial&quot;: true
</code></pre><p>Here is an example of a PaymentPage Request with the Container <strong>Recurring</strong>:</p><p><strong>Request URL</strong></p><pre><code class="language-http">POST /Payment/v1/PaymentPage/Initialize
</code></pre><pre><code class="language-json">{ 
&quot;RequestHeader&quot;: {
   &quot;SpecVersion&quot;: &quot;1.7&quot;,
   &quot;CustomerId&quot;: &quot;[your customer id]&quot;,
   &quot;RequestId&quot;: &quot;[unique request id]&quot;,
   &quot;RetryIndicator&quot;: 0
 },
 &quot;TerminalId&quot;: &quot;[your terminal id]&quot;,
 &quot;Payment&quot;: {
   &quot;Amount&quot;: {
     &quot;Value&quot;: &quot;100&quot;,
     &quot;CurrencyCode&quot;: &quot;CHF&quot;
   },
   &quot;Recurring&quot;: {
     &quot;Initial&quot;: true
   }
 },
 &quot;Payer&quot;: {
   &quot;LanguageCode&quot;: &quot;en&quot;
 },
 &quot;ReturnUrls&quot;: {
   &quot;Success&quot;: &quot;[your shop payment success url]&quot;,
   &quot;Fail&quot;: &quot;[your shop payment fail url]&quot;
 },
 &quot;Styling&quot;: {
   &quot;CssUrl&quot;: &quot;[your shop css url]&quot;
 }
}
</code></pre><div class="warning">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
  <p>
    <strong>Important:</strong> Due to laws, defined within PSD2, Saferpay will force a 3DS Challenge, if a transaction is labeled as <strong>recurring.initial = true</strong>!
  </p>
</div></div></div></section><section><h3>2. Validating the transaction</h3><div class="row"><div class="col-sm-6"><p>Depending on the Interface used to initialize the transaction, you can validate the payment and assess transaction based information with either:</p><ul>
<li><a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_PaymentPage_Assert">PaymentPage Assert</a> or</li>
<li><a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_Authorize">Transaction Authorize</a> function.</li>
</ul><p>Both request will provide you with information about the Transaction including the 3D Secure response:</p><p>Here is an example of a <strong>PaymentPage Assert Response</strong>:</p><pre><code class="language-json">{
  &quot;ResponseHeader&quot;: {
    &quot;SpecVersion&quot;: &quot;1.7&quot;,
    &quot;RequestId&quot;: &quot;[your request id]&quot;
  },
  &quot;Transaction&quot;: {
    &quot;Type&quot;: &quot;PAYMENT&quot;,
    &quot;Status&quot;: &quot;AUTHORIZED&quot;,
    &quot;Id&quot;: &quot;MUOGAWA9pKr6rAv5dUKIbAjrCGYA&quot;,
    &quot;Date&quot;: &quot;2017-06-18T09:19:27.078Z&quot;,
    &quot;Amount&quot;: {
      &quot;Value&quot;: &quot;100&quot;,
      &quot;CurrencyCode&quot;: &quot;CHF&quot;
    },
    &quot;AcquirerName&quot;: &quot;AcquirerName&quot;,
    &quot;AcquirerReference&quot;: &quot;Reference&quot;
  },
  &quot;PaymentMeans&quot;: {
    &quot;Brand&quot;: {
      &quot;PaymentMethod&quot;: &quot;SAFERPAYTEST&quot;,
      &quot;Name&quot;: &quot;SaferpayTestCard&quot;
    },
    &quot;DisplayText&quot;: &quot;9123 45xx xxxx 1234&quot;,
    &quot;Card&quot;: {
      &quot;MaskedNumber&quot;: &quot;912345xxxxxx1234&quot;,
      &quot;ExpYear&quot;: 2021,
      &quot;ExpMonth&quot;: 9,
      &quot;HolderName&quot;: &quot;Max Mustermann&quot;,
      &quot;CountryCode&quot;: &quot;CH&quot;
    }
  },
  &quot;Payer&quot;: {
    &quot;IpAddress&quot;: &quot;1.2.3.4&quot;,
    &quot;IpLocation&quot;: &quot;CH&quot;
  },
  &quot;ThreeDs&quot;: {
    &quot;Authenticated&quot;: true,
    &quot;LiabilityShift&quot;: true,
    &quot;Xid&quot;: &quot;ARkvCgk5Y1t/BDFFXkUPGX9DUgs=&quot;,
    &quot;VerificationValue&quot;: &quot;AAABBIIFmAAAAAAAAAAAAAAAAAA=&quot;
  }
}
</code></pre><p>You must save the <strong>TransactionId</strong> (Container: &quot;Transaction&quot;&gt;&quot;ID&quot;), returned in the Paymentpage Assert or Transaction Authorize response as this value will be used to reference recurring payments.</p><div class="warning">
  <p><strong>NOTE:</strong>We recommend only to proceed, if the parameter &#8220;Authenticated&#8221; is true. This value indicates that the card holder has performed a full successful authentication (3D Secure process) at his bank. This option provides the highest level of security against fraud. Please take notice that some banks will skip the 3Dsecure process if they consider the transaction to have a low risk thus will still grant Liabilityshift although the cardholder did not have to authenticate him or herself. In that case the values returned for &#8221;LiabilityShift&#8221; will be &#8220;true&#8221; and  &#8220;Authenticated&#8221; will be &#8220;false&#8221;. You should assess which level of security suits best to your business model and target group before deciding how to handle these two parameters.</p>
</div></div></div></section><section><h3>3. Recurring Transaction:</h3><div class="row"><div class="col-sm-6"><p>The next step is to perform the actual recurring transaction(s).
The API-Function that is required is <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_AuthorizeReferenced">Authorize Referenced</a>.
You have to simply submit the <strong>TransactionId</strong> from your initial transaction (discussed in step 2) to perform the recurring transaction(s)</p></div></div></section><section><h3>Flowchart</h3><div class="row"><div class="col-sm-6"><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/Recurring_Referenced_FlowChart.PNG" alt="alt text" title="Recurring with initial transaction"></p><ol>
<li>Gather the TransactionId from the previous, initial, transaction</li>
<li>Aquire the necessary payment-data e.g. Amount, Currency, OrderId etc.</li>
<li>Initialize and Execute Payment with <a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_AuthorizeReferenced">Transaction Authorize Referenced</a>
<ul>
<li>You will get the authorization-response right away</li>
</ul>
</li>
<li>Validate the request response</li>
<li>Depending on the outcome of step 4 you may
<ul>
<li><a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_Capture">Capture/Finalize the Transaction</a></li>
<li><a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_Cancel">Cancel/Abort the Transaction</a></li>
</ul>
</li>
<li>Transaction is finished!</li>
</ol><p>Here is an example of a <strong>Authorize Referenced Request</strong>:</p><p><strong>Request URL</strong></p><pre><code class="language-http">POST /Payment/v1/Transaction/AuthorizeReferenced
</code></pre><pre><code class="language-json">{
  &quot;RequestHeader&quot;: {
    &quot;SpecVersion&quot;: &quot;1.7&quot;,
    &quot;CustomerId&quot;: &quot;[your customer id]&quot;,
    &quot;RequestId&quot;: &quot;[unique request id]&quot;,
    &quot;RetryIndicator&quot;: 0
  },
  &quot;TerminalId&quot;: &quot;[your terminal id]&quot;,
  &quot;Payment&quot;: {
    &quot;Amount&quot;: {
      &quot;Value&quot;: &quot;100&quot;,
      &quot;CurrencyCode&quot;: &quot;CHF&quot;
    },
    &quot;Description&quot;: &quot;Test123&quot;,
    &quot;PayerNote&quot;: &quot;Order123_Testshop&quot;
  },
  &quot;TransactionReference&quot;: {
    &quot;TransactionId&quot;: &quot;MUOGAWA9pKr6rAv5dUKIbAjrCGYA&quot;
  }
}
</code></pre><div class="warning">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
  <p><strong>NOTE:</strong>  The Amount is a mandatory value which can vary from the Amount of the initial transaction. A change of amount has to be communicated with the card holder and you <strong>must</strong> re-do this process, to start the recurring-chain over again!</p>
</div><br><div class="danger">
  <span class="glyphicon glyphicon-remove-sign" style="color: rgb(224, 122, 105);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
  <p><strong>IMPORTANT:</strong> Each Transaction with the Status **Authorized** has to be <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_Capture">captured</a> to initiate the actual money transfer.</p>
</div><br></div></div></section><section id="recurring-alias"><h2><a name="recurring-alias"></a> Recurring Payments using an alias</h2><div class="row"><div class="col-sm-6"><p>A second method is to use the Saferpay Secure Alias Store in conjunction with the <a href="http://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_AuthorizeDirect">AuthorizeDirect Request</a> with previously registered Aliases.</p></div></div></section><section><h3>1. Obtaining the Alias</h3><div class="row"><div class="col-sm-6"><p>The alias can be obtained in multiple ways, using the Saferpay Secure Card Data store. <a href="https://saferpay.github.io/sndbx/scd.html">All of those options are described over here</a>.
By using the <a href="https://saferpay.github.io/sndbx/Integration_PP.html">Payment Page</a> or <a href="https://saferpay.github.io/sndbx/Integration_trx.html">Transaction Interface</a>, it is possible to do an initial transaction, to validate the card (e.g. through 3D Secure), similar to the referenced transaction-process above! The initial payment, unlike with a referenced authorization, can then be discarded, once the alias has been obtained, using <a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_Cancel">Transaction Cancel</a>. This way the card holder doesn't get charged for the dummy-amount!</p><div class="warning">
  <span class="glyphicon glyphicon-exclamation-sign" style="color: rgb(240, 169, 43);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
      <p><strong>Important:</strong> Amount values that undercut a certain value, can cause problems during the 3D Secure-process, thus we recommend a value of 500 (5,00 &#8364;). As mentioned above, this transaction can be discarded. It is only, to prevend the mentioned issues with 3D Secure!</p>
</div><br></div></div></section><section><h3>2. Recurring Transaction</h3><div class="row"><div class="col-sm-6"><p>Once tha alias has been obtained, you can execute the subsequent transactions using <a href="http://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_AuthorizeDirect">AuthorizeDirect Request</a>. The alias has to be filled into the <strong>PaymentMeans =&gt; Alias</strong> container.</p><div class="warning">
      <p><strong>Important:</strong> Please <strong>DO NOT</strong> save the CVC value inside your database and submit it yourself, unless you are certified to do so.</p>
</div></div></div></section><section><h3>Flowchart</h3><div class="row"><div class="col-sm-6"><p><img src="https://raw.githubusercontent.com/saferpay/sndbx/master/images/Recurring_Alias_FlowChart.PNG" alt="alt text" title="Recurring with initial transaction"></p><ol>
<li>Gather the AliasId from the previous, initial, transaction</li>
<li>Aquire the necessary payment-data e.g. Amount, Currency, OrderId etc.</li>
<li>Initialize and Execute Payment with <a href="http://saferpay.github.io/jsonapi/#Payment_v1_Transaction_AuthorizeDirect">Transaction Authorize Direct</a>
<ul>
<li>You will get the authorization-response right away</li>
</ul>
</li>
<li>Validate the request response</li>
<li>Depending on the outcome of step 4 you may
<ul>
<li><a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_Capture">Capture/Finalize the Transaction</a></li>
<li><a href="https://saferpay.github.io/jsonapi/#Payment_v1_Transaction_Cancel">Cancel/Abort the Transaction</a></li>
</ul>
</li>
<li>Transaction is finished!</li>
</ol><div class="danger">
  <span class="glyphicon glyphicon-remove-sign" style="color: rgb(224, 122, 105);font-size: 55px;height: 75px;float: left;margin-right: 15px;margin-top: 0px;"></span>
      <p><strong>Important:</strong> Each Transaction with the Status <strong>Authorized</strong> has to be <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_Capture">captured</a> to initiate the actual transfer of money.</p>
</div><hr></div></div></section><section id="recurring-auto"><h2><a name="recurring-auto"></a>  Automating the Recurring Payments</h2><div class="row"><div class="col-sm-6"><p>Automated recurring payments have to be triggered by the merchant's system. There are multiple ways to setup up the automated triggering of payments. The easiest way is to setup a Cronjob (Linux) or a Task (Windows).
With cronjobs you can schedule a command or script on your server to run automatically at a specified time and date (e.g. every minute, every 15 Minutes, every hour, or every day at 10pm or even every Sunday.)</p><p>The cronjob can be linked with a script (e.g. PHP, or a Bash script) that will be executed, every time the cronjob is triggered to automatically perform transactions. You should decide when and how often the payments have to be triggered depending on your business model and the prearranged scheduling of payments.</p><div class="warning">
  <p><strong>NOTE: </strong>Please note that each transaction has to be finalized by calling the <a href="https://saferpay.github.io/jsonapi/index.html#Payment_v1_Transaction_Capture">capture function</a> including the automated recurring transactions.</p>
</div></div></div></section>

			</main>

		</div>
	</div>

	<div class="scroll-top-wrapper">
		<a href="#top" class="scroll-top-inner" onclick="$('html,body').animate({ scrollTop: 0 }, 'slow'); return false;">
			<span class="glyphicon glyphicon-chevron-up"></span> Back to Top
		</a>
	</div>

	<script src="assets/js/vendors.js"></script>
	<script src="assets/js/helppage.js"></script>
</body>
</html>

